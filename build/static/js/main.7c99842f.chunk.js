(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{121:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(58),l=a.n(r),s=a(2),o=a(3),i=a(1),m=a(59),d=a.n(m).a.create({baseURL:"https://trybeer-bk.herokuapp.com"});d.interceptors.request.use((function(e){var t=JSON.parse(localStorage.getItem("user"));try{return t&&(e.headers.Authorization=t.token),e}catch(a){console.log("err",a)}}));var u=d;var f=function(e){var t=e.children,a=e.testId,n=e.bgColor,r=e.isDisabled,l=e.onClick;return c.a.createElement("button",{disabled:r,type:"button",onClick:l,"data-testid":a,className:"relative w-full flex justify-center py-2 px-4 border\n        border-transparent text-xl font-medium rounded-md text-white ".concat(n,"\n        hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2\n        focus:ring-yellow-500")},t)};var b=function(e){var t=e.value,a=e.label,n=e.id,r=e.name,l=e.type,s=e.testId,o=e.onChange,i=e.readOnly;return c.a.createElement("div",null,c.a.createElement("label",{className:"text-xl",htmlFor:n},a),c.a.createElement("input",{readOnly:i,value:t,"data-testid":s,id:n,name:r,type:l,onChange:function(e){var t=e.target;return o(t.value)},className:"relative block h-12 w-full px-3 py-2 border border-gray-300 text-gray-900 shadow-lg rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm"}))},p=Object(n.createContext)();var g=function(){var e=Object(n.useContext)(p),t=e.loginEmail,a=e.setLoginEmail,r=e.loginPassword,l=e.setLoginPassword;return c.a.createElement("div",{className:"rounded-md shadow-sm space-y-4"},c.a.createElement(b,{value:t,testId:"email-input",label:"Email",id:"email-address",name:"email",type:"email",onChange:a}),c.a.createElement(b,{value:r,testId:"password-input",label:"Senha",id:"password",name:"password",type:"password",onChange:l}))},E=a(60),v=a.n(E),x=function(e,t,a){var n=/^((?!\.)[\w-_.]*[^.])(@\w+)(\.\w+(\.\w+)?[^.\W])$/.test(e),c=/.{6,}/.test(t);a(!n||!c)};var h=function(){var e=Object(o.g)(),t=Object(n.useState)(!0),a=Object(i.a)(t,2),r=a[0],l=a[1],m=Object(n.useContext)(p),d=m.loginEmail,b=m.loginPassword,E=m.setLoginEmail,h=m.setLoginPassword;Object(n.useEffect)((function(){x(d,b,l)}),[d,b]);var j=function(){var t=u.post("/login",{email:d,password:b}).then((function(t){localStorage.setItem("user",JSON.stringify(t.data)),"administrator"===t.data.role&&e.push("/admin/orders"),"client"===t.data.role&&e.push("/products")})).catch((function(e){return console.error(e)}));return E(""),h(""),t};return c.a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},c.a.createElement("div",{className:"max-w-md w-full space-y-8"},c.a.createElement("img",{className:"mx-auto h-64 w-64 w-auto",src:v.a,alt:"Workflow"}),c.a.createElement("form",{className:"mt-8 space-y-6",action:"#",method:"POST"},c.a.createElement(g,null),c.a.createElement(f,{onClick:function(){return j()},isDisabled:r,bgColor:"bg-black",testId:"signin-btn"},"Entrar"),c.a.createElement(s.b,{to:"/register"},c.a.createElement(f,{bgColor:"bg-gray-700",testId:"no-account-btn"},"Ainda n\xe3o tenho conta")))))};var j=function(){var e=Object(n.useContext)(p),t=e.registerName,a=e.setRegisterName,r=e.registerEmail,l=e.setRegisterEmail,s=e.registerPassword,o=e.setRegisterPassword;return c.a.createElement("div",{className:"rounded-md shadow-sm space-y-4"},c.a.createElement(b,{value:t,testId:"signup-name",label:"Nome",id:"name",name:"name",type:"name",onChange:a,autoComplete:"name"}),c.a.createElement(b,{value:r,testId:"signup-email",label:"Email",id:"email-address",name:"email",type:"email",onChange:l,autoComplete:"email"}),c.a.createElement(b,{value:s,testId:"signup-password",label:"Senha",id:"password",name:"password",type:"password",onChange:o,autoComplete:"password"}))};var O=function(){return c.a.createElement("div",{className:"min-h-screen flex justify-center items-center"},c.a.createElement("div",{className:"flex space-x-3"},c.a.createElement("div",{className:"w-5 h-5 bg-yellow-300 rounded-full animate-bounce"}),c.a.createElement("div",{className:"w-5 h-5 bg-yellow-300 rounded-full animate-bounce"}),c.a.createElement("div",{className:"w-5 h-5 bg-yellow-300 rounded-full animate-bounce"})))},y=function(e,t,a,n){var c=/^((?!\.)[\w-_.]*[^.])(@\w+)(\.\w+(\.\w+)?[^.\W])$/.test(t),r=/^[a-zA-Z]+(([a-zA-Z ])?[a-zA-Z]*)*$/.test(e),l=/.{12,}/.test(e),s=/.{6,}/.test(a);n(!(c&&r&&l&&s))};var w=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(o.g)(),s=Object(n.useState)(""),m=Object(i.a)(s,2),d=m[0],b=m[1],g=Object(n.useState)(!0),E=Object(i.a)(g,2),v=E[0],x=E[1],h=Object(n.useContext)(p),w=h.registerName,N=h.registerEmail,S=h.registerPassword;Object(n.useEffect)((function(){y(w,N,S,x)}),[w,N,S]);var C=function(){var e=document.getElementById("wannasell").checked?"administrator":"client";return r(!0),u.post("/register",{name:w,email:N,password:S,role:e}).then((function(e){localStorage.setItem("user",JSON.stringify(e.data)),r(!1),"administrator"===e.data.role&&l.push("/admin/orders"),"client"===e.data.role&&l.push("/products")})).catch((function(e){r(!1),409===e.response.status&&b(e.response.data.message)}))};return a?c.a.createElement(O,null):c.a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},c.a.createElement("div",{className:"max-w-md w-full space-y-8"},c.a.createElement("form",{className:"mt-8 space-y-6",action:"#",method:"POST"},c.a.createElement("input",{type:"hidden",name:"remember",value:"true"}),c.a.createElement(j,null),c.a.createElement(f,{onClick:function(){return C()},isDisabled:v,bgColor:"bg-green-600",testId:"signup-btn"},"Cadastrar"),d&&c.a.createElement("p",{className:"my-10"},d),c.a.createElement("label",{htmlFor:"wannasell"},c.a.createElement("input",{className:"mt-5",name:"wannasell",type:"checkbox","data-testid":"signup-seller",id:"wannasell",label:"Quero vender",value:"wannasell"}),"Quero vender"))))},N=a(32),S=a(14);function C(e){var t=e.visible,a=Object(o.g)();return c.a.createElement("div",{className:"".concat(t?"":"invisible"," absolute top-16 left-0 w-32 lg:w-64 z-30\n      min-h-screen side-menu-container flex flex-col space-y-16 items-center bg-black")},c.a.createElement(s.b,{to:"/products"},c.a.createElement(f,{bgColor:"black",testId:"side-menu-item-products"},"Produtos")),c.a.createElement(s.b,{to:"/orders"},c.a.createElement(f,{bgColor:"black",testId:"side-menu-item-my-orders"},"Meus pedidos")),c.a.createElement(s.b,{to:"/profile"},c.a.createElement(f,{bgColor:"black",testId:"side-menu-item-my-profile"},"Meu Perfil")),c.a.createElement(s.b,{to:"/chat"},c.a.createElement(f,{bgColor:"black",testId:"side-menu-chat"},"Conversar com a loja")),c.a.createElement("div",{className:"bottom-12"},c.a.createElement(f,{onClick:function(){return localStorage.removeItem("user"),clearTimeout(),void a.push("/")},bgColor:"bg-red-400",testId:"side-menu-item-logout"},"Sair")))}C.defaultProps={visible:!1};var k=C;var I=function(e){var t=e.title,a=Object(n.useState)(!1),r=Object(i.a)(a,2),l=r[0],s=r[1];return c.a.createElement("header",{className:"relative h-16 w-full bg-black flex"},c.a.createElement(k,{visible:l}),c.a.createElement("button",{type:"button","data-testid":"top-hamburguer",onClick:function(){return s(!l)},className:"absolute top-0 left-0 bg-gray-200 h-16 w-16 text-3xl flex justify-center items-center"},c.a.createElement(S.a,null)),c.a.createElement("div",{className:"flex w-full justify-center items-center"},c.a.createElement("h1",{"data-testid":"top-title",className:"flex-grow text-center text-white text-3xl"},t)))};var P=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),o=s[0],m=s[1],d=Object(n.useState)(""),g=Object(i.a)(d,2),E=g[0],v=g[1],x=Object(n.useState)(!0),h=Object(i.a)(x,2),j=h[0],y=h[1],w=Object(n.useState)(""),S=Object(i.a)(w,2),C=S[0],k=S[1],P=Object(n.useContext)(p),R=P.getUser,q=P.setUser;return Object(n.useEffect)((function(){var e=R();m(e.name),v(e.email)}),[R]),Object(n.useEffect)((function(){var e=R().name!==o;y(!e)}),[o,R]),a?c.a.createElement(O,null):c.a.createElement("div",{className:"rounded-md shadow-sm space-y-4"},c.a.createElement(I,{title:"Meu perfil","data-testid":"top-title"}),c.a.createElement("div",{className:"sm:m-8 md:m-16 lg:m-24 xl:m-36 xl:m-48"},c.a.createElement(b,{value:o,testId:"profile-name-input",label:"Nome",id:"name",name:"name",type:"name",onChange:function(e){m(e)},autoComplete:"name"}),c.a.createElement(b,{value:E,testId:"profile-email-input",label:"Email",id:"email-address",name:"email",type:"email",autoComplete:"email",onChange:E,readOnly:!0}),c.a.createElement(f,{onClick:function(){return r(!0),void u.put("/profile",{name:o,email:E}).then((function(e){console.log(e.data),q(Object(N.a)(Object(N.a)({},R()),{},{name:o})),r(!1),y(!0),k("Atualiza\xe7\xe3o conclu\xedda com sucesso")})).catch((function(e){console.log(e.response)}))},isDisabled:j,bgColor:"bg-green-600",testId:"profile-save-btn"},"Salvar"),c.a.createElement("span",null,C)))};var R=function(e){var t=e.pedido,a=t.id,n=t.totalPrice,r=t.saleDate,l=t.status,s=r.substr(5,5).replace("-","/").split("/").reverse().join("/"),o="R$ ".concat(n.replace(".",","));return c.a.createElement("div",{className:"flex sm:w-64 sm:h-40 md:w-64 md:h-40 lg:w-72 lg:h-48 xl:w-80 xl:h-56 m-3 overflow-hidden rounded-lg shadow-lg"},c.a.createElement("div",{className:"flex flex-col items-center justify-center my-1 px-1 w-full xl:my-4 xl:px-4 sm:text-lg md:text-xl lg:text-2xl xl:text-2xl","data-testid":"".concat(a-1,"-order-card-container")},c.a.createElement("div",{"data-testid":"".concat(a-1,"-order-number"),className:"xl:text-3xl font-bold"},"Pedido"," ",a),c.a.createElement("div",{"data-testid":"".concat(a-1,"-order-date")},s),c.a.createElement("div",null,l),c.a.createElement("div",{className:"mt-10","data-testid":"".concat(a-1,"-order-total-value")},o)))};var q=function(){var e=Object(o.g)(),t=Object(n.useState)(!0),a=Object(i.a)(t,2),r=a[0],l=a[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),f=d[0],b=d[1];return Object(n.useEffect)((function(){localStorage.getItem("user")||e.push("/")}),[e]),Object(n.useEffect)((function(){u.get("/sales").then((function(e){console.log(e.data),b(e.data),l(!1)})).catch((function(e){return console.log(e.message)}))}),[]),r?c.a.createElement(O,null):c.a.createElement("div",null,c.a.createElement(I,{title:"Meus Pedidos"}),c.a.createElement("div",{className:"container my-12 mx-auto px-4 md:px-12"},c.a.createElement("div",{className:"sm:flex sm:flex-wrap sm:items-center sm:justify-center"},f.map((function(e,t){return c.a.createElement(s.b,{key:e.id,to:"/orders/".concat(e.id)},c.a.createElement(R,{key:e.id,pedido:e,IndexId:t}))})))))};var D=function(){var e=Object(o.g)(),t=Object(n.useContext)(p).stringTotal;return c.a.createElement("div",{className:"flex items-center justify-center fixed w-full rounded-md bottom-12"},c.a.createElement("button",{className:"flex items-center justify-center bg-green-700 rounded-md w-48 h-20",type:"button","data-testid":"checkout-bottom-btn",onClick:function(){e.push("/checkout")},disabled:"R$ 0,00"===t},c.a.createElement("h1",null,"Ver Carrinho"),c.a.createElement("span",null," "),c.a.createElement("span",{"data-testid":"checkout-bottom-btn-value"},t)))};var M=function(e){var t=e.product,a=e.testIdNumber,r=t.id,l=t.quantity,s=t.price,o=Object(n.useContext)(p),m=o.products,d=o.clickMinus,u=o.clickPlus,f=o.findProduct,b=Object(n.useState)(""),g=Object(i.a)(b,2),E=g[0],v=g[1],x=Object(n.useState)(""),h=Object(i.a)(x,2),j=h[0],O=h[1],y=Object(n.useState)(""),w=Object(i.a)(y,2),N=w[0],C=w[1];return Object(n.useEffect)((function(){if(0!==m.length){var e=f(r),t=e.name,a=e.stringPrice,n=e.urlImage;v(t),O(a),C(n)}}),[m,r,f]),c.a.createElement("div",{className:"flex flex-col items-center justify-center border-2 border-gray-800 w-36 h-56 rounded-md shadow-md p-2 font-sans lg:w-64 lg:h-96 m-5"},c.a.createElement("div",{className:"relative flex flex-col space-y-4 items-center"},c.a.createElement("img",{src:N,alt:E,className:"mx-auto h-24 w-24 w-auto","data-testid":"".concat(a,"-product-img")}),c.a.createElement("p",{className:"text-center","data-testid":"".concat(a,"-product-name")},E),c.a.createElement("p",{"data-testid":"".concat(a,"-product-price")},j)),c.a.createElement("div",{className:"relative mt-2 flex justify-center items-center"},c.a.createElement("button",{type:"button",className:"focus:outline-none",onClick:function(){return u(r,l,s)},"data-testid":"".concat(a,"-product-plus")},c.a.createElement(S.c,null)),c.a.createElement("p",{"data-testid":"".concat(a,"-product-qtd")},l),c.a.createElement("button",{type:"button",className:"focus:outline-none",onClick:function(){return d(r,l,s)},"data-testid":"".concat(a,"-product-minus")},c.a.createElement(S.b,null))))};var $=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(o.g)(),s=Object(n.useContext)(p),m=s.sale,d=s.getUser;return Object(n.useEffect)((function(){d()||l.push("/"),r(!1)}),[d,l]),a?c.a.createElement(O,null):c.a.createElement("div",null,c.a.createElement(I,{title:"TryBeer"}),c.a.createElement("div",{className:"flex flex-wrap justify-center mb-40 lg:p-32"},m&&m.map((function(e,t){return c.a.createElement(M,{product:e,testIdNumber:t,key:e.id})}))),c.a.createElement(D,null))};var L=function(){var e=Object(o.g)();return c.a.createElement("div",{className:"bg-black relative admin-side-bar-container flex flex-col items-center"},c.a.createElement("h1",{className:"text-white text-3xl"},"TryBeer"),c.a.createElement(s.b,{to:"/admin/orders"},c.a.createElement(f,{bgColor:"black",testId:"side-menu-item-orders"},"Pedidos")),c.a.createElement(s.b,{to:"/admin/profile"},c.a.createElement(f,{bgColor:"black",testId:"side-menu-item-profile"},"Perfil")),c.a.createElement(s.b,{to:"/admin/chats"},c.a.createElement(f,{bgColor:"black",testId:"side-menu-item-chat"},"Conversas")),c.a.createElement("div",{className:"bottom-12"},c.a.createElement(f,{onClick:function(){return localStorage.removeItem("user"),void e.push("/")},bgColor:"black",testId:"side-menu-item-logout"},"Sair")))};var F=function(e){var t=e.pedido,a=t.id,n=t.deliveryAddress,r=t.deliveryNumber,l=t.status,s=t.totalPrice,o=e.IndexId,i="R$ ".concat(s.replace(".",","));return c.a.createElement("div",{className:"flex sm:w-64 sm:h-40 md:w-64 md:h-40 lg:w-72 lg:h-48 xl:w-80 xl:h-56 m-3 overflow-hidden rounded-lg shadow-lg"},c.a.createElement("div",{className:"flex flex-col items-center justify-center my-1 px-1 w-full xl:my-4 xl:px-4 sm:text-lg md:text-xl lg:text-2xl xl:text-2xl"},c.a.createElement("div",{"data-testid":"".concat(o,"-order-number"),className:"text-2xl font-bold"},"Pedido"," ",a),c.a.createElement("div",{"data-testid":"".concat(o,"-order-address"),className:"text-sm"},n,", ",r),c.a.createElement("div",{className:"mt-10","data-testid":"".concat(o,"-order-total-value")},i)),c.a.createElement("div",{className:"flex-auto m-4"},c.a.createElement("div",{"data-testid":"".concat(o,"-order-status"),className:"Entregue"===l?"text-green-500":"text-yellow-400"},l)))};var T=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),o=Object(i.a)(l,2),m=o[0],d=o[1];return Object(n.useEffect)((function(){u.get("/sales").then((function(e){r(e.data),d(!1)})).catch((function(e){return console.log(e.message)}))}),[]),m?c.a.createElement(O,null):c.a.createElement("div",null,c.a.createElement(L,null),c.a.createElement("div",{className:"container my-12 mx-auto px-4 md:px-12"},c.a.createElement("div",{className:"sm:flex sm:flex-wrap sm:items-center sm:justify-center"},a.map((function(e,t){return c.a.createElement(s.b,{key:e.id,to:"/admin/orders/".concat(e.id)},c.a.createElement(F,{key:e.id,pedido:e,IndexId:t}))})))))};var z=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(o.g)(),s=Object(n.useContext)(p).getUser;return Object(n.useEffect)((function(){s()||l.push("/"),r(!1)}),[s,l]),a?c.a.createElement(O,null):c.a.createElement("div",{className:"text-center rounded-md shadow-sm space-y-4 sm:text-xl md:texl-2xl lg:text-3xl"},c.a.createElement(L,null),c.a.createElement("div",{className:"p-10"},c.a.createElement("h1",{className:"font-bold"},"Perfil"),c.a.createElement("p",{"data-testid":"profile-name",className:"italic m-8"},"Nome:"," ",s()&&s().name),c.a.createElement("p",{"data-testid":"profile-email",className:"italic m-8"},"Email:"," ",s()&&s().email)))};var J=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),o=Object(i.a)(l,2),m=o[0],d=o[1];return Object(n.useEffect)((function(){u.get("/admin/chats/").then((function(e){r(e.data),d(!1)}))}),[]),m?c.a.createElement(O,null):c.a.createElement("div",null,c.a.createElement(L,null),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:""},0===a.length?c.a.createElement("p",{"data-testid":"text-for-no-conversation"},"Nenhuma conversa por aqui!"):a.map((function(e,t){return"Loja"===e.email||c.a.createElement(s.b,{to:"/admin/chats/".concat(e.email)},c.a.createElement("div",{"data-testid":"containerChat",key:t,className:"m-3 border-2 border-black text-center max-w-md"},c.a.createElement("p",{"data-testid":"profile-name"},e.email),c.a.createElement("p",{"data-testid":"last-message"},"\xdaltima mensagem \xe0s"," ",function(e){var t=new Date(e),a=t.getHours(),n=a>9?a:"0".concat(a),c=t.getMinutes(),r=c>9?c:"0".concat(c);return"".concat(n,":").concat(r)}(e.lastDate))))})))))},A=a(25),U=a(63),B=a(62);a(118).config();var W=Object(B.io)("https://trybeer-bk.herokuapp.com");var Z=function(e){var t=e.msg,a=e.user,n=t.from,r=t.date,l=t.message,s=function(e){var t=new Date(e),a=t.getHours(),n=a>9?a:"0".concat(a),c=t.getMinutes(),r=c>9?c:"0".concat(c);return"".concat(n,":").concat(r)}(r),o=a===n;return c.a.createElement("div",{className:"flex flex-col w-1/2 rounded-t-xl\n      ".concat(o?"rounded-bl-xl bg-green-200 self-end":"rounded-br-xl bg-gray-200 self-start","\n      my-4 p-4")},c.a.createElement("div",null,c.a.createElement("span",{"data-testid":"nickname",className:"text-green-600"},n)," - ",c.a.createElement("span",{"data-testid":"message-time"},s)),c.a.createElement("p",{"data-testid":"text-message"},l))};var H=function(e){var t=e.setMessage,a=e.message,n=e.handleClick;return c.a.createElement("div",{className:"flex items-center w-full"},c.a.createElement("input",{className:"flex-grow bg-gray-200 my-2 p-2 h-10 rounded-l-lg",type:"text","data-testid":"message-input",value:a,onChange:function(e){return t(e.target.value)}}),c.a.createElement("button",{type:"button","data-testid":"send-message",onClick:n,className:"bg-green-700 text-white my-2 px-4 h-10 w-24 rounded-r-lg"},"Enviar"))};var Q=function(){var e=Object(o.h)().email,t=Object(n.useState)(!0),a=Object(i.a)(t,2),r=a[0],l=a[1],m=Object(n.useState)(""),d=Object(i.a)(m,2),f=d[0],b=d[1],p=Object(n.useState)([]),g=Object(i.a)(p,2),E=g[0],v=g[1],x=JSON.parse(localStorage.getItem("user")).email;return Object(n.useEffect)((function(){var t=[e,"Loja"].sort().join("-");W.emit("privateRoom",t),u.get("/admin/chats/search?q=".concat(e)).then((function(e){v(e.data),l(!1)}))}),[x,e]),Object(n.useEffect)((function(){W.on("serverMessage",(function(e){v([].concat(Object(A.a)(E),[e]))}))}),[E]),r?c.a.createElement(O,null):c.a.createElement("div",{className:"rounded-md shadow-sm space-y-4"},c.a.createElement(L,null),c.a.createElement("div",{className:"flex flex-col max-w-6xl"},c.a.createElement("div",{className:"flex content-center justify-center m-4"},c.a.createElement(s.b,{"data-testid":"back-button",to:"/admin/chats"},c.a.createElement(U.a,{className:"h-8 w-8"})),c.a.createElement("h3",{className:"text-xl ml-2 font-bold"},"Conversando com ".concat(E[0].from))),0!==E.length&&E.map((function(e,t){return c.a.createElement(Z,{msg:e,key:"message-".concat(t),user:"Loja"})}))),c.a.createElement(H,{message:f,setMessage:b,handleClick:function(){var t={from:"Loja",to:e,message:f,date:new Date};b(""),W.emit("chatMessage",t)}}))};var _=function(e){var t=e.product,a=e.testIdNumber,r=t.price,l=t.quantity,s=t.id,o=Object(n.useContext)(p),m=o.products,d=o.removeProduct,u=o.findProduct,f=Object(n.useState)(""),b=Object(i.a)(f,2),g=b[0],E=b[1],v=Object(n.useState)(""),x=Object(i.a)(v,2),h=x[0],j=x[1],O="R$ ".concat((parseFloat(r)*l).toFixed(2).replace(".",","));return Object(n.useEffect)((function(){if(0!==m.length){var e=u(s),t=e.name,a=e.stringPrice;E(t),j(a)}}),[m,u,s]),c.a.createElement("div",{className:"flex m-2 w-full px-4 py-2 shadow-md lg:py-4 rounded-md lg:rounded-xl bg-gray-100 justify-between items-center"},c.a.createElement("div",{className:"w-1/5 bg-yellow-200 py-2 rounded-xl"},c.a.createElement("p",{className:"text-3xl text-center font-semibold","data-testid":"".concat(a,"-product-qtd-input")},l)),c.a.createElement("div",{className:"flex text-xl flex-col px-4 w-3/5"},c.a.createElement("div",{className:"flex justify-center items-center"},c.a.createElement("p",{"data-testid":"".concat(a,"-product-name")},g)),c.a.createElement("div",{className:"flex justify-between items-baseline lg:justify-around items-center"},c.a.createElement("div",null,c.a.createElement("p",{"data-testid":"".concat(a,"-product-total-value")},O)),c.a.createElement("div",null,c.a.createElement("p",{className:"text-gray-700 text-sm","data-testid":"".concat(a,"-product-unit-price")},"(".concat(h," un)"))))),c.a.createElement("div",{className:"w-1/5 flex justify-center items-center"},c.a.createElement("button",{"data-testid":"".concat(a,"-removal-button"),type:"button",className:"text-red-600 text-4xl text-right focus:outline-none",onClick:function(){d(s)}},c.a.createElement(S.d,null))))};var V=function(e){var t=e.products,a=Object(n.useContext)(p).stringTotal;return c.a.createElement("div",{className:"flex flex-col items-center justify-center mx-auto w-full lg:w-3/5"},0===t.length?c.a.createElement("p",{className:"text-xl font-bold"},"N\xe3o h\xe1 produtos no carrinho"):t.map((function(e,t){return c.a.createElement(_,{key:"".concat(t,"-product"),testIdNumber:t,product:e})})),c.a.createElement("div",{className:"w-full"},c.a.createElement("p",{className:"text-3xl font-bold text-right lg:mt-4 lg:mr-6","data-testid":"order-total-value"},a)))};var G=function(){var e=Object(n.useContext)(p),t=e.sale,a=e.getUser,r=e.total,l=e.initiateSale,s=Object(o.g)(),m=t.filter((function(e){return 0!==e.quantity})),d=Object(n.useState)(!1),g=Object(i.a)(d,2),E=g[0],v=g[1],x=Object(n.useState)(""),h=Object(i.a)(x,2),j=h[0],O=h[1],y=Object(n.useState)(""),w=Object(i.a)(y,2),N=w[0],S=w[1],C=Object(n.useState)(!1),k=Object(i.a)(C,2),P=k[0],R=k[1];return Object(n.useEffect)((function(){a()||s.push("/login")}),[a,s]),Object(n.useEffect)((function(){0===t.length||""===j||""===N?v(!0):v(!1)}),[t,j,N]),c.a.createElement("div",null,c.a.createElement(I,{title:"Finalizar Pedido"}),c.a.createElement("div",{className:"flex flex-col font-sans mt-12 lg:mx-auto space-y-12 px-4 lg:max-w-5xl items-center"},c.a.createElement(V,{products:m}),c.a.createElement("div",{className:"w-full space-y-12"},c.a.createElement(b,{value:j,type:"text",onChange:O,label:"Rua",testId:"checkout-street-input"}),c.a.createElement(b,{value:N,type:"text",onChange:S,label:"N\xfamero da casa",testId:"checkout-house-number-input"})),c.a.createElement("div",{className:"absolute inset-auto z-100 flex items-center p-12 justify-center\n          w-64 h-32 text-xl font-bold bg-green-300 text-green-600 rounded-lg\n          ".concat(P?"":"hidden")},"Compra realizada com sucesso!"),c.a.createElement("div",{className:"lg:w-1/3"},c.a.createElement(f,{isDisabled:E,bgColor:"bg-green-600",onClick:function(){return function(){var e={products:m,total:parseFloat(r),deliveryAddress:j,deliveryNumber:N};u.post("/sales",e).catch((function(e){return console.log(e.message)})),R(!0),l()}()},testId:"checkout-finish-btn"},"Finalizar Pedido"))))};var K=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),o=s[0],m=s[1],d=Object(n.useState)([]),f=Object(i.a)(d,2),b=f[0],p=f[1],g=JSON.parse(localStorage.getItem("user")).email;return Object(n.useEffect)((function(){var e=[g,"Loja"].sort().join("-");W.emit("privateRoom",e),u.get("/chat",{headers:{email:g}}).then((function(e){p(e.data),r(!1)}))}),[g]),Object(n.useEffect)((function(){W.on("serverMessage",(function(e){p([].concat(Object(A.a)(b),[e]))}))}),[b]),a?c.a.createElement(O,null):c.a.createElement("div",{className:"flex flex-col items-center rounded-md shadow-sm space-y-4"},c.a.createElement(I,{title:"Chat","data-testid":"top-title"}),c.a.createElement("div",{className:"flex w-full justify-center max-w-6xl"},c.a.createElement("div",{className:"flex flex-col w-full self-stretch"},0!==b.length&&b.map((function(e,t){return c.a.createElement(Z,{msg:e,key:"message-".concat(t),user:g})})),c.a.createElement(H,{message:o,setMessage:m,handleClick:function(){var e={from:g,to:"Loja",message:o,date:new Date};m(""),W.emit("chatMessage",e)}}))))};var X=function(e){var t=e.sale,a=e.status,n="R$ ".concat(t.totalPrice.replace(".",","));return console.log("sale from oder details: ",t),c.a.createElement("div",{className:"m-2 sm:m-4 md:m-8 lg:m-12 xl:m-16 sm:text-xl md:texl-2xl lg:text-3xl"},c.a.createElement("div",null,c.a.createElement("div",{className:"flex justify-between m-5","data-testid":"".concat(t.id-1,"-order-card-container")},c.a.createElement("div",{"data-testid":"order-number",className:"font-bold"},"Pedido ".concat(t.id,": "),c.a.createElement("span",{"data-testid":"order-status"},a))),t.products.map((function(e,t){var a,n,r=(a=e.price,n=e.salesProducts.quantity,(parseFloat(a)*parseInt(n,10)).toFixed(2).replace(".",","));return c.a.createElement("div",{key:t,className:"flex justify-between overflow-hidden rounded-lg shadow-lg"},c.a.createElement("div",{className:"m-4 font-bold","data-testid":"".concat(t,"-product-qtd")},e.salesProducts.quantity),c.a.createElement("div",{className:"m-4","data-testid":"".concat(t,"-product-name")},e.name),c.a.createElement("div",{className:"m-4","data-testid":"".concat(t,"-product-total-value")},"R$ ".concat(r)),c.a.createElement("div",{className:"m-4 sm:m-4 md:m-6 lg:m-8 xl:m-10 text-sm lg:text-base xl-text-lg","data-testid":"".concat(t,"-order-unit-price")},"(R$ ".concat(e.price.replace(".",","),")")," ","un."))})),c.a.createElement("div",{className:"flex justify-end mt-3 font-bold","data-testid":"order-total-value"},"Total: ".concat(n))))},Y=function(e){var t=e.handleClick,a=e.children,n=e.testid;return c.a.createElement("button",{id:"deliver-button",type:"button",className:"p-4 bg-green-300 hover:bg-gray-500","data-testid":n,onClick:function(){return t()}}," ",a," ")};var ee=function(e){var t=e.setStatus,a=e.id,n=function(e){u.put("/sales/".concat(a),{status:e}).then((function(e){t(e.data.status)})).catch((function(e){return console.log(e.message)}))};return c.a.createElement("div",null,c.a.createElement(Y,{testid:"mark-as-prepared-btn",handleClick:function(){return n("Preparando")}},"Preparar pedido"),c.a.createElement(Y,{testid:"mark-as-delivered-btn",handleClick:function(){return n("Entregue")}},"Marcar como entregue"))};var te=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)({}),s=Object(i.a)(l,2),m=s[0],d=s[1],f=Object(n.useState)(""),b=Object(i.a)(f,2),p=b[0],g=b[1],E=Object(o.h)().id;return Object(n.useEffect)((function(){u.get("/sales/".concat(E)).then((function(e){d(e.data),g(e.data.status),r(!1)})).catch((function(e){return console.log(e.message)}))}),[E,p]),a?c.a.createElement(O,null):c.a.createElement("div",null,c.a.createElement(L,null),c.a.createElement(X,{sale:m,status:p}),c.a.createElement("div",{className:"flex justify-center"},"Entregue"===p?c.a.createElement("span",{className:"text-sm md:text-base lg:text-lg text-green-500"},"Pedido Entregue!"):c.a.createElement(ee,{setStatus:g,id:E})))};var ae=function(e){var t=e.sale;console.log(t);var a=new Date(t.saleDate),n=a.getDate(),r=a.getMonth(),l=r<9?"0".concat(r+1):"".concat(r+1),s="".concat(n,"/").concat(l),o="R$ ".concat(t.totalPrice.replace(".",","));return c.a.createElement("div",{className:"m-12"},c.a.createElement("div",null,c.a.createElement("div",{className:"flex justify-between mb-3","data-testid":"".concat(t.id-1,"-order-card-container")},c.a.createElement("div",{"data-testid":"order-number",className:"sm:text-2xl md:texl-3xl lg:text-4xl"},"Pedido"," ",t.id),c.a.createElement("div",{className:"sm:text-lg md:texl-xl lg:text-2xl","data-testid":"order-date"},s)),t.products.map((function(e,t){var a,n,r="R$ ".concat((a=e.price,n=e.salesProducts.quantity,(parseFloat(a)*parseInt(n,10)).toFixed(2).replace(".",",")));return c.a.createElement("div",{key:t,className:"flex justify-between overflow-hidden rounded-lg shadow-lg sm:text-xl md:texl-2xl lg:text-3xl"},c.a.createElement("div",{className:"m-4","data-testid":"".concat(t,"-product-qtd")},e.salesProducts.quantity),c.a.createElement("div",{className:"m-4","data-testid":"".concat(t,"-product-name")},e.name),c.a.createElement("div",{className:"m-4","data-testid":"".concat(t,"-product-total-value")},r))})),c.a.createElement("div",{className:"flex justify-start mt-3 sm:text-lg md:texl-xl lg:text-2xl","data-testid":"order-total-value"},t.status),c.a.createElement("div",{className:"flex justify-end mt-3 sm:text-lg md:texl-xl lg:text-2xl","data-testid":"order-total-value"},"Total:"," ",o)))};var ne=function(){var e=Object(o.g)(),t=Object(n.useState)(!0),a=Object(i.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)({}),m=Object(i.a)(s,2),d=m[0],f=m[1],b=Object(o.h)().id;return Object(n.useEffect)((function(){localStorage.getItem("user")||e.push("/")}),[e]),Object(n.useEffect)((function(){u.get("/sales/".concat(b)).then((function(e){f(e.data),l(!1)})).catch((function(e){return console.log(e.message)}))}),[b]),r?c.a.createElement(O,null):c.a.createElement("div",null,c.a.createElement(I,{title:"Detalhes do Pedido"}),c.a.createElement(ae,{sale:d}))};var ce=function(){return c.a.createElement(s.a,null,c.a.createElement(o.d,null,c.a.createElement(o.b,{path:"/login",component:h}),c.a.createElement(o.b,{path:"/products",component:$}),c.a.createElement(o.b,{path:"/admin/orders/:id",component:te}),c.a.createElement(o.b,{path:"/admin/orders",component:T}),c.a.createElement(o.b,{path:"/admin/profile",component:z}),c.a.createElement(o.b,{path:"/admin/chats/:email",component:Q}),c.a.createElement(o.b,{path:"/admin/chats",component:J}),c.a.createElement(o.b,{path:"/register",component:w}),c.a.createElement(o.b,{path:"/profile",component:P}),c.a.createElement(o.b,{path:"/orders/:id",component:ne}),c.a.createElement(o.b,{path:"/orders",component:q}),c.a.createElement(o.b,{path:"/checkout",component:G}),c.a.createElement(o.b,{path:"/chat",component:K}),c.a.createElement(o.a,{from:"/",to:"/login"})))};var re=function(){return c.a.createElement("div",{className:"font-sans"},c.a.createElement(ce,null))};var le=function(e){var t=e.children,a=JSON.parse(localStorage.getItem("sale")),r=a&&0!==a.length,l=Object(n.useState)(""),s=Object(i.a)(l,2),o=s[0],m=s[1],d=Object(n.useState)(""),f=Object(i.a)(d,2),b=f[0],g=f[1],E=Object(n.useState)(!0),v=Object(i.a)(E,2),x=v[0],h=v[1],j=Object(n.useState)([]),O=Object(i.a)(j,2),y=O[0],w=O[1],N=Object(n.useState)(""),S=Object(i.a)(N,2),C=S[0],k=S[1],I=Object(n.useState)(""),P=Object(i.a)(I,2),R=P[0],q=P[1],D=Object(n.useState)(""),M=Object(i.a)(D,2),$=M[0],L=M[1],F=Object(n.useState)(""),T=Object(i.a)(F,2),z=T[0],J=T[1],A=Object(n.useState)(a),U=Object(i.a)(A,2),B=U[0],W=U[1],Z=Object(n.useState)(0),H=Object(i.a)(Z,2),Q=H[0],_=H[1],V=Object(n.useState)("R$ 0,00"),G=Object(i.a)(V,2),K=G[0],X=G[1];Object(n.useEffect)((function(){if(!r){var e=y.map((function(e){return{id:e.id,quantity:e.quantity,price:e.price}}));W(e)}}),[y,r]),Object(n.useEffect)((function(){if(B&&0!==B.length){var e=B.reduce((function(e,t){return e+t.price*t.quantity}),0).toFixed(2);if(_(e),0===e)X("R$ 0,00");else{var t="R$ ".concat(e.replace(".",","));X(t)}}localStorage.setItem("sale",JSON.stringify(B))}),[B]),Object(n.useEffect)((function(){u.get("/products").then((function(e){return e.data})).then((function(e){w(e)}))}),[]);var Y={loginEmail:o,setLoginEmail:m,loginPassword:b,setLoginPassword:g,isDisabled:x,setIsDisabled:h,products:y,setProducts:w,registerName:C,setRegisterName:k,registerEmail:R,setRegisterEmail:q,registerPassword:$,setRegisterPassword:L,registerIsDisabled:z,setRegisterIsDisabled:J,sale:B,setSale:W,total:Q,setTotal:_,stringTotal:K,setStringTotal:X,clickMinus:function(e,t,a){if(!(t<=0)){var n={id:e,quantity:t-1,price:a},c=B.filter((function(t){return t.id!==e}));console.log("new sale in provider minus: ",c),c.push(n),c.sort((function(e,t){return e.id-t.id})),W(c)}},clickPlus:function(e,t,a){var n={id:e,quantity:t+1,price:a},c=B.filter((function(t){return t.id!==e}));c.push(n),c.sort((function(e,t){return e.id-t.id})),W(c)},findProduct:function(e){return y.find((function(t){return t.id===e}))},removeProduct:function(e){var t=B.filter((function(t){return t.id!==e}));t.sort((function(e,t){return e.id-t.id})),W(t)},initiateSale:function(){var e=y.map((function(e){return{id:e.id,quantity:e.quantity,price:e.price}}));W(e)},getUser:function(){return JSON.parse(localStorage.getItem("user"))},setUser:function(e){return localStorage.setItem("user",JSON.stringify(e))}};return c.a.createElement(p.Provider,{value:Y},t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(121);l.a.render(c.a.createElement(le,null,c.a.createElement(c.a.StrictMode,null,c.a.createElement(re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,a){e.exports=a.p+"static/media/Logo.c3c0a214.png"},64:function(e,t,a){e.exports=a(122)}},[[64,1,2]]]);
//# sourceMappingURL=main.7c99842f.chunk.js.map