(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{119:function(e,t,a){},120:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(61),r=a.n(l),s=a(2),o=a(3),i=a(1),m=a(18),d=a.n(m),u=a(25),f=a.n(u),b=f()(),p=d.a.create({baseURL:b.REACT_APP_BASE_URL||"http://localhost:3001"});p.interceptors.request.use((function(e){var t=JSON.parse(localStorage.getItem("user"));try{return t&&(e.headers.Authorization=t.token),e}catch(a){console.log("err",a)}}));var g=p;var E=function(e){var t=e.children,a=e.testId,n=e.bgColor,l=e.isDisabled,r=e.onClick;return c.a.createElement("button",{disabled:l,type:"button",onClick:r,"data-testid":a,className:"relative w-full flex justify-center py-2 px-4 border\n        border-transparent text-xl font-medium rounded-md text-white ".concat(n,"\n        hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2\n        focus:ring-yellow-500")},t)};var v=function(e){var t=e.value,a=e.label,n=e.id,l=e.name,r=e.type,s=e.testId,o=e.onChange,i=e.readOnly;return c.a.createElement("div",null,c.a.createElement("label",{className:"text-xl",htmlFor:n},a),c.a.createElement("input",{readOnly:i,value:t,"data-testid":s,id:n,name:l,type:r,onChange:function(e){var t=e.target;return o(t.value)},className:"relative block h-12 w-full px-3 py-2 border border-gray-300 text-gray-900 shadow-lg rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm"}))},x=Object(n.createContext)();var h=function(){var e=Object(n.useContext)(x),t=e.loginEmail,a=e.setLoginEmail,l=e.loginPassword,r=e.setLoginPassword;return c.a.createElement("div",{className:"rounded-md shadow-sm space-y-4"},c.a.createElement(v,{value:t,testId:"email-input",label:"Email",id:"email-address",name:"email",type:"email",onChange:a}),c.a.createElement(v,{value:l,testId:"password-input",label:"Senha",id:"password",name:"password",type:"password",onChange:r}))},j=a(62),O=a.n(j),y=function(e,t,a){var n=/^((?!\.)[\w-_.]*[^.])(@\w+)(\.\w+(\.\w+)?[^.\W])$/.test(e),c=/.{6,}/.test(t);a(!n||!c)};var N=function(){var e=Object(o.g)(),t=Object(n.useState)(!0),a=Object(i.a)(t,2),l=a[0],r=a[1],m=Object(n.useContext)(x),d=m.loginEmail,u=m.loginPassword,f=m.setLoginEmail,b=m.setLoginPassword;Object(n.useEffect)((function(){y(d,u,r)}),[d,u]);var p=function(){var t=g.post("/login",{email:d,password:u}).then((function(t){localStorage.setItem("user",JSON.stringify(t.data)),"administrator"===t.data.role&&e.push("/admin/orders"),"client"===t.data.role&&e.push("/products")})).catch((function(e){return console.error(e)}));return f(""),b(""),t};return c.a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},c.a.createElement("div",{className:"max-w-md w-full space-y-8"},c.a.createElement("img",{className:"mx-auto h-64 w-64 w-auto",src:O.a,alt:"Workflow"}),c.a.createElement("form",{className:"mt-8 space-y-6",action:"#",method:"POST"},c.a.createElement(h,null),c.a.createElement(E,{onClick:function(){return p()},isDisabled:l,bgColor:"bg-black",testId:"signin-btn"},"Entrar"),c.a.createElement(s.b,{to:"/register"},c.a.createElement(E,{bgColor:"bg-gray-700",testId:"no-account-btn"},"Ainda n\xe3o tenho conta")))))};var w=function(){var e=Object(n.useContext)(x),t=e.registerName,a=e.setRegisterName,l=e.registerEmail,r=e.setRegisterEmail,s=e.registerPassword,o=e.setRegisterPassword;return c.a.createElement("div",{className:"rounded-md shadow-sm space-y-4"},c.a.createElement(v,{value:t,testId:"signup-name",label:"Nome",id:"name",name:"name",type:"name",onChange:a,autoComplete:"name"}),c.a.createElement(v,{value:l,testId:"signup-email",label:"Email",id:"email-address",name:"email",type:"email",onChange:r,autoComplete:"email"}),c.a.createElement(v,{value:s,testId:"signup-password",label:"Senha",id:"password",name:"password",type:"password",onChange:o,autoComplete:"password"}))};var S=function(){return c.a.createElement("div",{className:"min-h-screen flex justify-center items-center"},c.a.createElement("div",{className:"flex space-x-3"},c.a.createElement("div",{className:"w-5 h-5 bg-yellow-300 rounded-full animate-bounce"}),c.a.createElement("div",{className:"w-5 h-5 bg-yellow-300 rounded-full animate-bounce"}),c.a.createElement("div",{className:"w-5 h-5 bg-yellow-300 rounded-full animate-bounce"})))},C=function(e,t,a,n){var c=/^((?!\.)[\w-_.]*[^.])(@\w+)(\.\w+(\.\w+)?[^.\W])$/.test(t),l=/^[a-zA-Z]+(([a-zA-Z ])?[a-zA-Z]*)*$/.test(e),r=/.{12,}/.test(e),s=/.{6,}/.test(a);n(!(c&&l&&r&&s))};var k=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(o.g)(),s=Object(n.useState)(""),m=Object(i.a)(s,2),d=m[0],u=m[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),p=b[0],v=b[1],h=Object(n.useContext)(x),j=h.registerName,O=h.registerEmail,y=h.registerPassword;Object(n.useEffect)((function(){C(j,O,y,v)}),[j,O,y]);var N=function(){var e=document.getElementById("wannasell").checked?"administrator":"client";return l(!0),g.post("/register",{name:j,email:O,password:y,role:e}).then((function(e){localStorage.setItem("user",JSON.stringify(e.data)),l(!1),"administrator"===e.data.role&&r.push("/admin/orders"),"client"===e.data.role&&r.push("/products")})).catch((function(e){l(!1),409===e.response.status&&u(e.response.data.message)}))};return a?c.a.createElement(S,null):c.a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},c.a.createElement("div",{className:"max-w-md w-full space-y-8"},c.a.createElement("form",{className:"mt-8 space-y-6",action:"#",method:"POST"},c.a.createElement("input",{type:"hidden",name:"remember",value:"true"}),c.a.createElement(w,null),c.a.createElement(E,{onClick:function(){return N()},isDisabled:p,bgColor:"bg-green-600",testId:"signup-btn"},"Cadastrar"),d&&c.a.createElement("p",{className:"my-10"},d),c.a.createElement("label",{htmlFor:"wannasell"},c.a.createElement("input",{className:"mt-5",name:"wannasell",type:"checkbox","data-testid":"signup-seller",id:"wannasell",label:"Quero vender",value:"wannasell"}),"Quero vender"))))},I=a(34),P=a(14);function R(e){var t=e.visible,a=Object(o.g)();return c.a.createElement("div",{className:"".concat(t?"":"invisible"," absolute top-16 left-0 w-32 lg:w-64 z-30\n      min-h-screen side-menu-container flex flex-col space-y-16 items-center bg-black")},c.a.createElement(s.b,{to:"/products"},c.a.createElement(E,{bgColor:"black",testId:"side-menu-item-products"},"Produtos")),c.a.createElement(s.b,{to:"/orders"},c.a.createElement(E,{bgColor:"black",testId:"side-menu-item-my-orders"},"Meus pedidos")),c.a.createElement(s.b,{to:"/profile"},c.a.createElement(E,{bgColor:"black",testId:"side-menu-item-my-profile"},"Meu Perfil")),c.a.createElement(s.b,{to:"/chat"},c.a.createElement(E,{bgColor:"black",testId:"side-menu-chat"},"Conversar com a loja")),c.a.createElement("div",{className:"bottom-12"},c.a.createElement(E,{onClick:function(){return localStorage.removeItem("user"),clearTimeout(),void a.push("/")},bgColor:"bg-red-400",testId:"side-menu-item-logout"},"Sair")))}R.defaultProps={visible:!1};var q=R;var D=function(e){var t=e.title,a=Object(n.useState)(!1),l=Object(i.a)(a,2),r=l[0],s=l[1];return c.a.createElement("header",{className:"relative h-16 w-full bg-black flex"},c.a.createElement(q,{visible:r}),c.a.createElement("button",{type:"button","data-testid":"top-hamburguer",onClick:function(){return s(!r)},className:"absolute top-0 left-0 bg-gray-200 h-16 w-16 text-3xl flex justify-center items-center"},c.a.createElement(P.a,null)),c.a.createElement("div",{className:"flex w-full justify-center items-center"},c.a.createElement("h1",{"data-testid":"top-title",className:"flex-grow text-center text-white text-3xl"},t)))};var $=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),o=s[0],m=s[1],d=Object(n.useState)(""),u=Object(i.a)(d,2),f=u[0],b=u[1],p=Object(n.useState)(!0),h=Object(i.a)(p,2),j=h[0],O=h[1],y=Object(n.useState)(""),N=Object(i.a)(y,2),w=N[0],C=N[1],k=Object(n.useContext)(x),P=k.getUser,R=k.setUser;return Object(n.useEffect)((function(){var e=P();m(e.name),b(e.email)}),[P]),Object(n.useEffect)((function(){var e=P().name!==o;O(!e)}),[o,P]),a?c.a.createElement(S,null):c.a.createElement("div",{className:"rounded-md shadow-sm space-y-4"},c.a.createElement(D,{title:"Meu perfil","data-testid":"top-title"}),c.a.createElement("div",{className:"sm:m-8 md:m-16 lg:m-24 xl:m-36 xl:m-48"},c.a.createElement(v,{value:o,testId:"profile-name-input",label:"Nome",id:"name",name:"name",type:"name",onChange:function(e){m(e)},autoComplete:"name"}),c.a.createElement(v,{value:f,testId:"profile-email-input",label:"Email",id:"email-address",name:"email",type:"email",autoComplete:"email",onChange:f,readOnly:!0}),c.a.createElement(E,{onClick:function(){return l(!0),void g.put("/profile",{name:o,email:f}).then((function(e){console.log(e.data),R(Object(I.a)(Object(I.a)({},P()),{},{name:o})),l(!1),O(!0),C("Atualiza\xe7\xe3o conclu\xedda com sucesso")})).catch((function(e){console.log(e.response)}))},isDisabled:j,bgColor:"bg-green-600",testId:"profile-save-btn"},"Salvar"),c.a.createElement("span",null,w)))};var A=function(e){var t=e.pedido,a=t.id,n=t.totalPrice,l=t.saleDate,r=t.status,s=l.substr(5,5).replace("-","/").split("/").reverse().join("/"),o="R$ ".concat(n.replace(".",","));return c.a.createElement("div",{className:"flex sm:w-64 sm:h-40 md:w-64 md:h-40 lg:w-72 lg:h-48 xl:w-80 xl:h-56 m-3 overflow-hidden rounded-lg shadow-lg"},c.a.createElement("div",{className:"flex flex-col items-center justify-center my-1 px-1 w-full xl:my-4 xl:px-4 sm:text-lg md:text-xl lg:text-2xl xl:text-2xl","data-testid":"".concat(a-1,"-order-card-container")},c.a.createElement("div",{"data-testid":"".concat(a-1,"-order-number"),className:"xl:text-3xl font-bold"},"Pedido"," ",a),c.a.createElement("div",{"data-testid":"".concat(a-1,"-order-date")},s),c.a.createElement("div",null,r),c.a.createElement("div",{className:"mt-10","data-testid":"".concat(a-1,"-order-total-value")},o)))};var T=function(){var e=Object(o.g)(),t=Object(n.useState)(!0),a=Object(i.a)(t,2),l=a[0],r=a[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),u=d[0],f=d[1];return Object(n.useEffect)((function(){localStorage.getItem("user")||e.push("/")}),[e]),Object(n.useEffect)((function(){g.get("/sales").then((function(e){console.log(e.data),f(e.data),r(!1)})).catch((function(e){return console.log(e.message)}))}),[]),l?c.a.createElement(S,null):c.a.createElement("div",null,c.a.createElement(D,{title:"Meus Pedidos"}),c.a.createElement("div",{className:"container my-12 mx-auto px-4 md:px-12"},c.a.createElement("div",{className:"sm:flex sm:flex-wrap sm:items-center sm:justify-center"},u.map((function(e,t){return c.a.createElement(s.b,{key:e.id,to:"/orders/".concat(e.id)},c.a.createElement(A,{key:e.id,pedido:e,IndexId:t}))})))))};var F=function(){var e=Object(o.g)(),t=Object(n.useContext)(x).stringTotal;return c.a.createElement("div",{className:"flex items-center justify-center fixed w-full rounded-md bottom-12"},c.a.createElement("button",{className:"flex items-center justify-center bg-green-700 rounded-md w-48 h-20",type:"button","data-testid":"checkout-bottom-btn",onClick:function(){e.push("/checkout")},disabled:"R$ 0,00"===t},c.a.createElement("h1",null,"Ver Carrinho"),c.a.createElement("span",null," "),c.a.createElement("span",{"data-testid":"checkout-bottom-btn-value"},t)))};var L=function(e){var t=e.product,a=e.testIdNumber,l=t.id,r=t.quantity,s=t.price,o=Object(n.useContext)(x),m=o.products,d=o.clickMinus,u=o.clickPlus,f=o.findProduct,b=Object(n.useState)(""),p=Object(i.a)(b,2),g=p[0],E=p[1],v=Object(n.useState)(""),h=Object(i.a)(v,2),j=h[0],O=h[1],y=Object(n.useState)(""),N=Object(i.a)(y,2),w=N[0],S=N[1];return Object(n.useEffect)((function(){if(0!==m.length){var e=f(l),t=e.name,a=e.stringPrice,n=e.urlImage;E(t),O(a),S(n)}}),[m,l,f]),c.a.createElement("div",{className:"flex flex-col items-center justify-center border-2 border-gray-800 w-36 h-56 rounded-md shadow-md p-2 font-sans lg:w-64 lg:h-96 m-5"},c.a.createElement("div",{className:"relative flex flex-col space-y-4 items-center"},c.a.createElement("img",{src:w,alt:g,className:"mx-auto h-24 w-24 w-auto","data-testid":"".concat(a,"-product-img")}),c.a.createElement("p",{className:"text-center","data-testid":"".concat(a,"-product-name")},g),c.a.createElement("p",{"data-testid":"".concat(a,"-product-price")},j)),c.a.createElement("div",{className:"relative mt-2 flex justify-center items-center"},c.a.createElement("button",{type:"button",className:"focus:outline-none",onClick:function(){return u(l,r,s)},"data-testid":"".concat(a,"-product-plus")},c.a.createElement(P.c,null)),c.a.createElement("p",{"data-testid":"".concat(a,"-product-qtd")},r),c.a.createElement("button",{type:"button",className:"focus:outline-none",onClick:function(){return d(l,r,s)},"data-testid":"".concat(a,"-product-minus")},c.a.createElement(P.b,null))))};var M=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(o.g)(),s=Object(n.useContext)(x),m=s.sale,d=s.getUser;return Object(n.useEffect)((function(){d()||r.push("/"),l(!1)}),[d,r]),a?c.a.createElement(S,null):c.a.createElement("div",null,c.a.createElement(D,{title:"TryBeer"}),c.a.createElement("div",{className:"flex flex-wrap justify-center mb-40 lg:p-32"},m&&m.map((function(e,t){return c.a.createElement(L,{product:e,testIdNumber:t,key:e.id})}))),c.a.createElement(F,null))};var z=function(){var e=Object(o.g)();return c.a.createElement("div",{className:"bg-black relative admin-side-bar-container flex flex-col items-center"},c.a.createElement("h1",{className:"text-white text-3xl"},"TryBeer"),c.a.createElement(s.b,{to:"/admin/orders"},c.a.createElement(E,{bgColor:"black",testId:"side-menu-item-orders"},"Pedidos")),c.a.createElement(s.b,{to:"/admin/profile"},c.a.createElement(E,{bgColor:"black",testId:"side-menu-item-profile"},"Perfil")),c.a.createElement(s.b,{to:"/admin/chats"},c.a.createElement(E,{bgColor:"black",testId:"side-menu-item-chat"},"Conversas")),c.a.createElement("div",{className:"bottom-12"},c.a.createElement(E,{onClick:function(){return localStorage.removeItem("user"),void e.push("/")},bgColor:"black",testId:"side-menu-item-logout"},"Sair")))};var J=function(e){var t=e.pedido,a=t.id,n=t.deliveryAddress,l=t.deliveryNumber,r=t.status,s=t.totalPrice,o=e.IndexId,i="R$ ".concat(s.replace(".",","));return c.a.createElement("div",{className:"flex sm:w-64 sm:h-40 md:w-64 md:h-40 lg:w-72 lg:h-48 xl:w-80 xl:h-56 m-3 overflow-hidden rounded-lg shadow-lg"},c.a.createElement("div",{className:"flex flex-col items-center justify-center my-1 px-1 w-full xl:my-4 xl:px-4 sm:text-lg md:text-xl lg:text-2xl xl:text-2xl"},c.a.createElement("div",{"data-testid":"".concat(o,"-order-number"),className:"text-2xl font-bold"},"Pedido"," ",a),c.a.createElement("div",{"data-testid":"".concat(o,"-order-address"),className:"text-sm"},n,", ",l),c.a.createElement("div",{className:"mt-10","data-testid":"".concat(o,"-order-total-value")},i)),c.a.createElement("div",{className:"flex-auto m-4"},c.a.createElement("div",{"data-testid":"".concat(o,"-order-status"),className:"Entregue"===r?"text-green-500":"text-yellow-400"},r)))};var U=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(!0),o=Object(i.a)(r,2),m=o[0],d=o[1];return Object(n.useEffect)((function(){g.get("/sales").then((function(e){l(e.data),d(!1)})).catch((function(e){return console.log(e.message)}))}),[]),m?c.a.createElement(S,null):c.a.createElement("div",null,c.a.createElement(z,null),c.a.createElement("div",{className:"container my-12 mx-auto px-4 md:px-12"},c.a.createElement("div",{className:"sm:flex sm:flex-wrap sm:items-center sm:justify-center"},a.map((function(e,t){return c.a.createElement(s.b,{key:e.id,to:"/admin/orders/".concat(e.id)},c.a.createElement(J,{key:e.id,pedido:e,IndexId:t}))})))))};var _=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(o.g)(),s=Object(n.useContext)(x).getUser;return Object(n.useEffect)((function(){s()||r.push("/"),l(!1)}),[s,r]),a?c.a.createElement(S,null):c.a.createElement("div",{className:"text-center rounded-md shadow-sm space-y-4 sm:text-xl md:texl-2xl lg:text-3xl"},c.a.createElement(z,null),c.a.createElement("div",{className:"p-10"},c.a.createElement("h1",{className:"font-bold"},"Perfil"),c.a.createElement("p",{"data-testid":"profile-name",className:"italic m-8"},"Nome:"," ",s()&&s().name),c.a.createElement("p",{"data-testid":"profile-email",className:"italic m-8"},"Email:"," ",s()&&s().email)))};var B=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(!0),o=Object(i.a)(r,2),m=o[0],d=o[1];return Object(n.useEffect)((function(){g.get("/admin/chats/").then((function(e){console.log(e.data),l(e.data),d(!1)}))}),[]),m?c.a.createElement(S,null):c.a.createElement("div",null,c.a.createElement(z,null),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:""},0===a.length?c.a.createElement("p",{"data-testid":"text-for-no-conversation"},"Nenhuma conversa por aqui!"):a.map((function(e,t){return"Loja"===e.email||c.a.createElement(s.b,{to:"/admin/chats/".concat(e.email)},c.a.createElement("div",{"data-testid":"containerChat",key:t,className:"m-3 border-2 border-black text-center max-w-md"},c.a.createElement("p",{"data-testid":"profile-name"},e.email),c.a.createElement("p",{"data-testid":"last-message"},"\xdaltima mensagem \xe0s"," ",function(e){var t=new Date(e),a=t.getHours(),n=a>9?a:"0".concat(a),c=t.getMinutes(),l=c>9?c:"0".concat(c);return"".concat(n,":").concat(l)}(e.lastDate))))})))))},W=a(27),H=a(26),Z=a(64),Q=Object(H.io)("http://localhost:3001");var V=function(){var e=Object(o.h)().email,t=Object(n.useState)(!0),a=Object(i.a)(t,2),l=a[0],r=a[1],m=Object(n.useState)(""),d=Object(i.a)(m,2),u=d[0],f=d[1],b=Object(n.useState)([]),p=Object(i.a)(b,2),E=p[0],v=p[1],x=JSON.parse(localStorage.getItem("user")).email;return Object(n.useEffect)((function(){Q.on("connect",(function(){console.log("".concat(Q.id))})),g.get("/admin/chats/search?q=".concat(e)).then((function(e){console.log(e.data),v(e.data),r(!1)}))}),[x,e]),l?c.a.createElement(S,null):c.a.createElement("div",{className:"rounded-md shadow-sm space-y-4"},c.a.createElement(z,null),c.a.createElement("div",{className:"text-center justify-content-center"},c.a.createElement("div",{className:"flex content-center justify-center m-4"},c.a.createElement(s.b,{"data-testid":"back-button",to:"/admin/chats"},c.a.createElement(Z.a,{className:"h-8 w-8"})),c.a.createElement("h3",{className:"text-xl ml-2 font-bold"},"Conversando com ".concat(E[0].email))),0!==E.length&&E.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("div",null,c.a.createElement("span",{"data-testid":"nickname",className:"text-green-600"},e.email)," - ",c.a.createElement("span",{"data-testid":"message-time"},function(e){var t=new Date(e),a=t.getHours(),n=a>9?a:"0".concat(a),c=t.getMinutes(),l=c>9?c:"0".concat(c);return"".concat(n,":").concat(l)}(e.date))),c.a.createElement("p",{"data-testid":"text-message"},e.message))}))),c.a.createElement("div",{className:"text-center justify-content-center"},c.a.createElement("input",{className:"bg-gray-200 m-2",type:"text","data-testid":"message-input",value:u,onChange:function(e){return f(e.target.value)}}),c.a.createElement("button",{type:"button","data-testid":"send-message",onClick:function(){return function(){var e={email:"Loja",message:u,date:new Date};g.post("/chat",e),f(""),v([].concat(Object(W.a)(E),[e]))}()}},"Enviar")))};var G=function(e){var t=e.product,a=e.testIdNumber,l=t.price,r=t.quantity,s=t.id,o=Object(n.useContext)(x),m=o.products,d=o.removeProduct,u=o.findProduct,f=Object(n.useState)(""),b=Object(i.a)(f,2),p=b[0],g=b[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),h=v[0],j=v[1],O="R$ ".concat((parseFloat(l)*r).toFixed(2).replace(".",","));return Object(n.useEffect)((function(){if(0!==m.length){var e=u(s),t=e.name,a=e.stringPrice;g(t),j(a)}}),[m,u,s]),c.a.createElement("div",{className:"flex m-2 w-full px-4 py-2 shadow-md lg:py-4 rounded-md lg:rounded-xl bg-gray-100 justify-between items-center"},c.a.createElement("div",{className:"w-1/5 bg-yellow-200 py-2 rounded-xl"},c.a.createElement("p",{className:"text-3xl text-center font-semibold","data-testid":"".concat(a,"-product-qtd-input")},r)),c.a.createElement("div",{className:"flex text-xl flex-col px-4 w-3/5"},c.a.createElement("div",{className:"flex justify-center items-center"},c.a.createElement("p",{"data-testid":"".concat(a,"-product-name")},p)),c.a.createElement("div",{className:"flex justify-between items-baseline lg:justify-around items-center"},c.a.createElement("div",null,c.a.createElement("p",{"data-testid":"".concat(a,"-product-total-value")},O)),c.a.createElement("div",null,c.a.createElement("p",{className:"text-gray-700 text-sm","data-testid":"".concat(a,"-product-unit-price")},"(".concat(h," un)"))))),c.a.createElement("div",{className:"w-1/5 flex justify-center items-center"},c.a.createElement("button",{"data-testid":"".concat(a,"-removal-button"),type:"button",className:"text-red-600 text-4xl text-right focus:outline-none",onClick:function(){d(s)}},c.a.createElement(P.d,null))))};var K=function(e){var t=e.products,a=Object(n.useContext)(x).stringTotal;return c.a.createElement("div",{className:"flex flex-col items-center justify-center mx-auto w-full lg:w-3/5"},0===t.length?c.a.createElement("p",{className:"text-xl font-bold"},"N\xe3o h\xe1 produtos no carrinho"):t.map((function(e,t){return c.a.createElement(G,{key:"".concat(t,"-product"),testIdNumber:t,product:e})})),c.a.createElement("div",{className:"w-full"},c.a.createElement("p",{className:"text-3xl font-bold text-right lg:mt-4 lg:mr-6","data-testid":"order-total-value"},a)))};var X=function(){var e=Object(n.useContext)(x),t=e.sale,a=e.getUser,l=e.total,r=e.initiateSale,s=Object(o.g)(),m=t.filter((function(e){return 0!==e.quantity})),d=Object(n.useState)(!1),u=Object(i.a)(d,2),f=u[0],b=u[1],p=Object(n.useState)(""),h=Object(i.a)(p,2),j=h[0],O=h[1],y=Object(n.useState)(""),N=Object(i.a)(y,2),w=N[0],S=N[1],C=Object(n.useState)(!1),k=Object(i.a)(C,2),I=k[0],P=k[1];return Object(n.useEffect)((function(){a()||s.push("/login")}),[a,s]),Object(n.useEffect)((function(){0===t.length||""===j||""===w?b(!0):b(!1)}),[t,j,w]),c.a.createElement("div",null,c.a.createElement(D,{title:"Finalizar Pedido"}),c.a.createElement("div",{className:"flex flex-col font-sans mt-12 lg:mx-auto space-y-12 px-4 lg:max-w-5xl items-center"},c.a.createElement(K,{products:m}),c.a.createElement("div",{className:"w-full space-y-12"},c.a.createElement(v,{value:j,type:"text",onChange:O,label:"Rua",testId:"checkout-street-input"}),c.a.createElement(v,{value:w,type:"text",onChange:S,label:"N\xfamero da casa",testId:"checkout-house-number-input"})),c.a.createElement("div",{className:"absolute inset-auto z-100 flex items-center p-12 justify-center\n          w-64 h-32 text-xl font-bold bg-green-300 text-green-600 rounded-lg\n          ".concat(I?"":"hidden")},"Compra realizada com sucesso!"),c.a.createElement("div",{className:"lg:w-1/3"},c.a.createElement(E,{isDisabled:f,bgColor:"bg-green-600",onClick:function(){return function(){var e={products:m,total:parseFloat(l),deliveryAddress:j,deliveryNumber:w};g.post("/sales",e).catch((function(e){return console.log(e.message)})),P(!0),r()}()},testId:"checkout-finish-btn"},"Finalizar Pedido"))))},Y=f()(),ee=Object(H.io)(Y.REACT_APP_BASE_URL);var te=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),o=s[0],m=s[1],d=Object(n.useState)([]),u=Object(i.a)(d,2),f=u[0],b=u[1],p=JSON.parse(localStorage.getItem("user")).email;return Object(n.useEffect)((function(){ee.on("connect",(function(){console.log("".concat(ee.id))})),g.get("/chat",{headers:{email:p}}).then((function(e){console.log(e.data),b(e.data),l(!1)}))}),[p]),a?c.a.createElement(S,null):c.a.createElement("div",{className:"rounded-md shadow-sm space-y-4"},c.a.createElement(D,{title:"Chat","data-testid":"top-title"}),c.a.createElement("div",{className:"text-center justify-content-center"},0!==f.length&&f.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("div",null,c.a.createElement("span",{"data-testid":"nickname",className:"text-green-600"},e.email)," - ",c.a.createElement("span",{"data-testid":"message-time"},function(e){var t=new Date(e),a=t.getHours(),n=a>9?a:"0".concat(a),c=t.getMinutes(),l=c>9?c:"0".concat(c);return"".concat(n,":").concat(l)}(e.date))),c.a.createElement("p",{"data-testid":"text-message"},e.message))}))),c.a.createElement("div",{className:"text-center justify-content-center"},c.a.createElement("input",{className:"bg-gray-200 m-2",type:"text","data-testid":"message-input",value:o,onChange:function(e){return m(e.target.value)}}),c.a.createElement("button",{type:"button","data-testid":"send-message",onClick:function(){return function(){var e={email:p,message:o,date:new Date};g.post("/chat",e),m(""),b([].concat(Object(W.a)(f),[e]))}()}},"Enviar")))};var ae=function(e){var t=e.sale,a=e.status,n="R$ ".concat(t.totalPrice.replace(".",","));return c.a.createElement("div",{className:"m-2 sm:m-4 md:m-8 lg:m-12 xl:m-16 sm:text-xl md:texl-2xl lg:text-3xl"},c.a.createElement("div",null,c.a.createElement("div",{className:"flex justify-between m-5","data-testid":"".concat(t.saleId-1,"-order-card-container")},c.a.createElement("div",{"data-testid":"order-number",className:"font-bold"},"Pedido ".concat(t.saleId),c.a.createElement("span",{"data-testid":"order-status"},a))),t.products.map((function(e,t){var a,n,l=(a=e.price,n=e.salesProducts.quantity,(parseFloat(a)*parseInt(n,10)).toFixed(2).replace(".",","));return c.a.createElement("div",{key:t,className:"flex justify-between overflow-hidden rounded-lg shadow-lg"},c.a.createElement("div",{className:"m-4 font-bold","data-testid":"".concat(t,"-product-qtd")},e.salesProducts.quantity),c.a.createElement("div",{className:"m-4","data-testid":"".concat(t,"-product-name")},e.name),c.a.createElement("div",{className:"m-4","data-testid":"".concat(t,"-product-total-value")},"R$ ".concat(l)),c.a.createElement("div",{className:"m-4 sm:m-4 md:m-6 lg:m-8 xl:m-10 text-sm lg:text-base xl-text-lg","data-testid":"".concat(t,"-order-unit-price")},"(R$ ".concat(e.price.replace(".",","),")")," ","un."))})),c.a.createElement("div",{className:"flex justify-end mt-3 font-bold","data-testid":"order-total-value"},"Total: ".concat(n))))},ne=function(e){var t=e.handleClick,a=e.children,n=e.testid;return c.a.createElement("button",{id:"deliver-button",type:"button",className:"p-4 bg-green-300 hover:bg-gray-500","data-testid":n,onClick:function(){return t()}}," ",a," ")};var ce=function(e){var t=e.setStatus,a=e.id,n=function(e){d.a.put("http://localhost:3001/sales/".concat(a),{status:e}).then((function(e){t(e.data.status)})).catch((function(e){return console.log(e.message)}))};return c.a.createElement("div",null,c.a.createElement(ne,{testid:"mark-as-prepared-btn",handleClick:function(){return n("Preparando")}},"Preparar pedido"),c.a.createElement(ne,{testid:"mark-as-delivered-btn",handleClick:function(){return n("Entregue")}},"Marcar como entregue"))};var le=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)({}),s=Object(i.a)(r,2),m=s[0],u=s[1],f=Object(n.useState)(""),b=Object(i.a)(f,2),p=b[0],g=b[1],E=Object(o.h)().id;return Object(n.useEffect)((function(){d.a.get("http://localhost:3001/sales/".concat(E)).then((function(e){u(e.data),g(e.data.status),l(!1)})).catch((function(e){return console.log(e.message)}))}),[E,p]),a?c.a.createElement(S,null):c.a.createElement("div",null,c.a.createElement(z,null),c.a.createElement(ae,{sale:m,status:p}),c.a.createElement("div",{className:"flex justify-center"},"Entregue"===p?c.a.createElement("span",{className:"text-sm md:text-base lg:text-lg text-green-500"},"Pedido Entregue!"):c.a.createElement(ce,{setStatus:g,id:E})))};var re=function(e){var t=e.sale,a=new Date(t.saleDate),n=a.getDate(),l=a.getMonth(),r=l<9?"0".concat(l+1):"".concat(l+1),s="".concat(n,"/").concat(r),o="R$ ".concat(t.totalPrice.replace(".",","));return c.a.createElement("div",{className:"m-12"},c.a.createElement("div",null,c.a.createElement("div",{className:"flex justify-between mb-3","data-testid":"".concat(t.saleId-1,"-order-card-container")},c.a.createElement("div",{"data-testid":"order-number",className:"sm:text-2xl md:texl-3xl lg:text-4xl"},"Pedido"," ",t.saleId),c.a.createElement("div",{className:"sm:text-lg md:texl-xl lg:text-2xl","data-testid":"order-date"},s)),t.products.map((function(e,t){var a,n,l="R$ ".concat((a=e.price,n=e.salesProducts.quantity,(parseFloat(a)*parseInt(n,10)).toFixed(2).replace(".",",")));return c.a.createElement("div",{key:t,className:"flex justify-between overflow-hidden rounded-lg shadow-lg sm:text-xl md:texl-2xl lg:text-3xl"},c.a.createElement("div",{className:"m-4","data-testid":"".concat(t,"-product-qtd")},e.salesProducts.quantity),c.a.createElement("div",{className:"m-4","data-testid":"".concat(t,"-product-name")},e.name),c.a.createElement("div",{className:"m-4","data-testid":"".concat(t,"-product-total-value")},l))})),c.a.createElement("div",{className:"flex justify-start mt-3 sm:text-lg md:texl-xl lg:text-2xl","data-testid":"order-total-value"},t.status),c.a.createElement("div",{className:"flex justify-end mt-3 sm:text-lg md:texl-xl lg:text-2xl","data-testid":"order-total-value"},"Total:"," ",o)))};var se=function(){var e=Object(o.g)(),t=Object(n.useState)(!0),a=Object(i.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)({}),m=Object(i.a)(s,2),d=m[0],u=m[1],f=Object(o.h)().id;return Object(n.useEffect)((function(){localStorage.getItem("user")||e.push("/")}),[e]),Object(n.useEffect)((function(){g.get("/sales/".concat(f)).then((function(e){u(e.data),r(!1)})).catch((function(e){return console.log(e.message)}))}),[f]),l?c.a.createElement(S,null):c.a.createElement("div",null,c.a.createElement(D,{title:"Detalhes do Pedido"}),c.a.createElement(re,{sale:d}))};var oe=function(){return c.a.createElement(s.a,null,c.a.createElement(o.d,null,c.a.createElement(o.b,{path:"/login",component:N}),c.a.createElement(o.b,{path:"/products",component:M}),c.a.createElement(o.b,{path:"/admin/orders/:id",component:le}),c.a.createElement(o.b,{path:"/admin/orders",component:U}),c.a.createElement(o.b,{path:"/admin/profile",component:_}),c.a.createElement(o.b,{path:"/admin/chats/:email",component:V}),c.a.createElement(o.b,{path:"/admin/chats",component:B}),c.a.createElement(o.b,{path:"/register",component:k}),c.a.createElement(o.b,{path:"/profile",component:$}),c.a.createElement(o.b,{path:"/orders/:id",component:se}),c.a.createElement(o.b,{path:"/orders",component:T}),c.a.createElement(o.b,{path:"/checkout",component:X}),c.a.createElement(o.b,{path:"/chat",component:te}),c.a.createElement(o.a,{from:"/",to:"/login"})))};var ie=function(){return c.a.createElement("div",{className:"font-sans"},c.a.createElement(oe,null))};var me=function(e){var t=e.children,a=JSON.parse(localStorage.getItem("sale")),l=a&&0!==a.length,r=Object(n.useState)(""),s=Object(i.a)(r,2),o=s[0],m=s[1],d=Object(n.useState)(""),u=Object(i.a)(d,2),f=u[0],b=u[1],p=Object(n.useState)(!0),E=Object(i.a)(p,2),v=E[0],h=E[1],j=Object(n.useState)([]),O=Object(i.a)(j,2),y=O[0],N=O[1],w=Object(n.useState)(""),S=Object(i.a)(w,2),C=S[0],k=S[1],I=Object(n.useState)(""),P=Object(i.a)(I,2),R=P[0],q=P[1],D=Object(n.useState)(""),$=Object(i.a)(D,2),A=$[0],T=$[1],F=Object(n.useState)(""),L=Object(i.a)(F,2),M=L[0],z=L[1],J=Object(n.useState)(a),U=Object(i.a)(J,2),_=U[0],B=U[1],W=Object(n.useState)(0),H=Object(i.a)(W,2),Z=H[0],Q=H[1],V=Object(n.useState)("R$ 0,00"),G=Object(i.a)(V,2),K=G[0],X=G[1];Object(n.useEffect)((function(){if(!l){var e=y.map((function(e){return{id:e.id,quantity:e.quantity,price:e.price}}));B(e)}}),[y,l]),Object(n.useEffect)((function(){if(_&&0!==_.length){var e=_.reduce((function(e,t){return e+t.price*t.quantity}),0).toFixed(2);if(Q(e),0===e)X("R$ 0,00");else{var t="R$ ".concat(e.replace(".",","));X(t)}}localStorage.setItem("sale",JSON.stringify(_))}),[_]),Object(n.useEffect)((function(){g.get("/products").then((function(e){return e.data})).then((function(e){N(e)}))}),[]);var Y={loginEmail:o,setLoginEmail:m,loginPassword:f,setLoginPassword:b,isDisabled:v,setIsDisabled:h,products:y,setProducts:N,registerName:C,setRegisterName:k,registerEmail:R,setRegisterEmail:q,registerPassword:A,setRegisterPassword:T,registerIsDisabled:M,setRegisterIsDisabled:z,sale:_,setSale:B,total:Z,setTotal:Q,stringTotal:K,setStringTotal:X,clickMinus:function(e,t,a){if(!(t<=0)){var n={id:e,quantity:t-1,price:a},c=_.filter((function(t){return t.id!==e}));console.log("new sale in provider minus: ",c),c.push(n),c.sort((function(e,t){return e.id-t.id})),B(c)}},clickPlus:function(e,t,a){var n={id:e,quantity:t+1,price:a},c=_.filter((function(t){return t.id!==e}));c.push(n),c.sort((function(e,t){return e.id-t.id})),B(c)},findProduct:function(e){return y.find((function(t){return t.id===e}))},removeProduct:function(e){var t=_.filter((function(t){return t.id!==e}));t.sort((function(e,t){return e.id-t.id})),B(t)},initiateSale:function(){var e=y.map((function(e){return{id:e.id,quantity:e.quantity,price:e.price}}));B(e)},getUser:function(){return JSON.parse(localStorage.getItem("user"))},setUser:function(e){return localStorage.setItem("user",JSON.stringify(e))}};return c.a.createElement(x.Provider,{value:Y},t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(119);r.a.render(c.a.createElement(me,null,c.a.createElement(c.a.StrictMode,null,c.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,a){e.exports=a.p+"static/media/Logo.c3c0a214.png"},65:function(e,t,a){e.exports=a(120)}},[[65,1,2]]]);
//# sourceMappingURL=main.107556f7.chunk.js.map